(function(){define(["modules/clean/ajax","modules/constants/python","modules/core/browser","modules/core/i18n","modules/core/notify"],function(e,t,n,r,s){var i,o,u,a,c,d,m,f,l;return i=t.TRADEMARK_BUSINESS,o=r._,l=r.ungettext,a=function(t,n){return e.WebRequest({url:"/team/discover/get_discoverable_team_for_folder",type:"POST",data:{ns_id:t},success:function(e){return e=JSON.parse(e),n(null!=e?e.team:void 0)},error:function(){return n()}})},m=function(t,r){return e.WebRequest({url:"/team/discover/join_ajax",data:{team_id:t,cont:"#"},success:function(e){switch(e=JSON.parse(e),null!=e?e.result:void 0){case"request_sent":s.success(o("Request to join sent."));break;case"can_join":n.redirect(e.url);break;case"max_team_size_achieved":s.error(o("This team has reached the maximum size. Please ask the admins of this team to upgrade to %(trademark_business)s, which allows teams to add as many members as possible.").format({trademark_business:i}));break;case"pending_approval":s.success(o("Your request to join is pending."));break;default:s.error(o("Invalid request"))}return"function"==typeof r?r(e):void 0},error:function(){return s.error(o("Error sending request.")),"function"==typeof r?r():void 0}})},d=function(t,n,r){return e.WebRequest({url:"/account/team/add_users",subject_user:n,data:{emails:t,team_id:r},success:function(e){var t;return e=JSON.parse(e),e.num_invited?(t=l("Invitation sent.","Invitations sent.",e.num_invited),s.success(t)):void 0},error:function(){var e;return e=l("Error sending invitation.","Error sending invitations.",t.length),s.error(e)}})},c=function(t,r,i){return e.WebRequest({url:"/account/team/add_users",subject_user:r,data:{emails:t,team_id:i},success:function(e){var t;return e=JSON.parse(e),e.num_invited?(t=l("Invitation sent.","Invitations sent.",e.num_invited),s.success(t)):void 0},error:function(){var e;return e=l("Error sending invitation.","Error sending invitations.",t.length),s.error(e),f(t,function(){return n.redirect("/team/admin/requests")})}})},f=function(t,n,r){return e.WebRequest({url:"/team/discover/suggest_ajax",data:{emails:JSON.stringify(t)},success:function(e){var r;return r=l("Suggestion sent.","Suggestions sent.",t.length),s.success(r),"function"==typeof n?n(e):void 0},error:function(){var e;return e=l("Error sending suggestion.","Error sending suggestions.",t.length),s.error(e),"function"==typeof r?r():void 0}})},u=function(t,n,r){return e.WebRequest({url:"/team/discover/filter_suggestable_ajax",type:"POST",data:{emails:JSON.stringify(t)},success:function(e){return e=JSON.parse(e),"function"==typeof n?n(e):void 0},error:function(){return"function"==typeof r?r():void 0}})},{getDiscoverableTeamForFolder:a,sendAdminTeamInvitations:c,sendTeamRequest:m,sendLimitedTeamInvitations:d,sendTeamSuggestions:f,filterSuggestableUsers:u}})}).call(this);
//# sourceMappingURL=membership_discovery_util.min.js-vflfSyREx.map