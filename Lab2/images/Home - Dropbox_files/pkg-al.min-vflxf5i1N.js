(function(){define("modules/clean/notes",["jquery","external/underscore","modules/clean/dbmodal","modules/clean/register_form"],function(e,t,a,o){var s;return s=function(){function t(){var t;e("#db-modal-notes-sign-in-modal").length&&(t=new a.DBModal({element_id:"notes-sign-in-modal"}),e("#notes-sign-in-button").on("click",function(e){return e.preventDefault(),t.show()}),e(document).on(o.USER_EXISTS,function(e){return t.show(e.focus,e.prefill)}))}return t}()})}).call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("modules/clean/notes_landing_page",["jquery","modules/core/browser","modules/core/dom","modules/core/notify","modules/clean/dbmodal","modules/clean/ajax","modules/clean/components/ajax_form","modules/clean/viewer","modules/clean/multiaccount_login","modules/core/uri","modules/constants/viewer"],function(t,a,o,s,r,i,n,m,l,c,u){var p,d;return p={WORK:"work",PERSONAL:"personal"},d=function(){function n(a,o,s){this.proceedToPersonalPaper=e(this.proceedToPersonalPaper,this),this.proceedToWorkPaper=e(this.proceedToWorkPaper,this),this.onUsePersonalClick=e(this.onUsePersonalClick,this),this.onContinueToPaperClick=e(this.onContinueToPaperClick,this);var i;this.cont=a,this.team_id=o,this.state=s,i=new r.DBModal({element_id:"paper-sign-in-modal"}),t(".paper-header-signin").click(function(e){return e.preventDefault(),i.show()}),t(".notes-promo-modal-error-button").click(function(e){return function(){return e.onErrorButtonClick()}}(this)),t(".notes-promo-modal-content-container").click(function(e){return function(){return e.onModalOverlayClick()}}(this)),t(".notes-getstarted-form-button").click(function(e){return function(){return e.onEnablePaperClick()}}(this)),t(".notes-request-form-button").click(function(e){return function(){return e.onRequestPaperClick()}}(this)),t(".notes-request-form-personal-account").click(function(e){return function(){return e.onUsePersonalClick()}}(this)),t(".notes-getstarted-form-personal-account").click(function(e){return function(){return e.onUsePersonalClick()}}(this)),t(".notes-personal-button").click(function(e){return function(){return e.onUsePersonalClick()}}(this)),t(".notes-continue-button").click(function(e){return function(){return e.onContinueToPaperClick()}}(this)),t(".notes-login-form-create-account-link").click(function(e){return function(){return e.openRegisterModal()}}(this)),t(".notes-signup-button").click(function(e){return function(){return e.onSignUpClick()}}(this)),"DENY_ACCESS"===s&&this.denyAccess()}return n.prototype.getNotesRedirect=function(e){var t;return t=c.parse(this.cont),t.updateQuery({role:e}).toString()},n.prototype.onSignUpClick=function(){return a.redirect("/paper/register")},n.prototype.continueFromLandingPage=function(e){return i.WebRequest({url:"/paper/continue_from_landing_page",success:function(t){return e()}})},n.prototype.onContinueToPaperClick=function(){return this.continueFromLandingPage(function(e){return function(){return"SHOW_CONTINUE_PERSONAL"===e.state?e.proceedToPersonalPaper():"SHOW_CONTINUE_WORK"===e.state&&e.proceedToWorkPaper(),!1}}(this))},n.prototype.onUsePersonalClick=function(){return this.continueFromLandingPage(this.proceedToPersonalPaper),!1},n.prototype.onErrorButtonClick=function(){return this.closeModal()},n.prototype.onModalOverlayClick=function(){return t(event.target).closest(".notes-promo-modal-content").length?void 0:this.closeModal()},n.prototype.onEnablePaperClick=function(){var e,a;return e=t(".notes-getstarted-form-tos-checkbox").is(":checked"),e?i.WebRequest({url:"/team/activate_paper",data:{tos_agree:e,notes_enabled_policy:"yes",team_id:this.team_id},success:function(e){return function(t){return e.continueFromLandingPage(e.proceedToWorkPaper())}}(this),error:function(e,t,a){var o;return o=JSON.parse(a),s.error(o.tos_agree.message_text)}}):(a=t(".notes-getstarted-form-error"),void a.text("Please agree to the terms of service."))},n.prototype.onRequestPaperClick=function(){return i.WebRequest({url:"/team/request_paper",success:function(e){return function(t){return e.setModalText("Your request has been sent to your team admin.","","Got it"),e.openErrorModal()}}(this)})},n.prototype.hideSignin=function(){return t(".paper-header-signin").css("display","none"),t(".paper-header-content").css("justify-content","space-around")},n.prototype.denyAccess=function(){return this.setModalText("Paper beta isn't available to everyone yet, but it will be soon.","","Got it"),this.openErrorModal()},n.prototype.proceedToWorkPaper=function(){return a.redirect(this.getNotesRedirect(p.WORK))},n.prototype.proceedToPersonalPaper=function(){return a.redirect(this.getNotesRedirect(p.PERSONAL))},n.prototype.setModalText=function(e,a,o){return t(".notes-promo-modal-error-title").text(e),t(".notes-promo-modal-error-subtitle").text(a),t(".notes-promo-modal-error-button").text(o)},n.prototype.closeModal=function(){var e;return t(".notes-modal.db-modal-overlay").remove(),e=t(".notes-promo-modal-content"),e.removeClass("notes-promo-modal-content-animate"),setTimeout(function(e){return function(){return e.hideModalContent()}}(this),300),o.scroll_unlock_document()},n.prototype.hideModalContent=function(){return t(".notes-promo-modal-root").css("display","none"),t(".notes-promo-modal-error").css("display","none"),t(".notes-promo-modal-register").css("display","none")},n.prototype.openErrorModal=function(){return t(".notes-promo-modal-error").css("display","block"),this.openModal()},n.prototype.openRegisterModal=function(){return t(".notes-promo-modal-register").css("display","block"),this.openModal(),!1},n.prototype.openModal=function(){var e,a;return o.scroll_lock_document(),e=t(".notes-promo-modal-root"),a=t(".notes-promo-modal-content"),t("<div />",{class:"notes-modal db-modal-overlay"}).appendTo("body"),e.css("display","block"),setTimeout(function(){return a.addClass("notes-promo-modal-content-animate")},100)},n}()})}.call(this),function(){define("modules/clean/react/dbox_app_promo",["external/classnames","external/react","jquery","modules/core/browser","modules/core/i18n","modules/clean/react/button","modules/clean/react/image","modules/clean/static_urls"],function(e,t,a,o,s,r,i,n){var m,l,c,u,p,d,h,_,g,f,b,v,y,T;return f=s._,T=n.static_url,b=t.createElement,v=t.DOM,y=t.PropTypes,g=t.addons.CSSTransitionGroup,c=t.createClass({displayName:"DboxAppPromo",propTypes:{title:y.string,className:y.string},render:function(){var t;return t={"dbox-app-promo-container":!0},this.props.className&&(t[this.props.className]=!0),v.div({className:e(t)},v.div({className:"dbox-app-promo-title"},this.props.title),v.div({className:"dbox-app-promo"},this.props.children))}}),m=t.createClass({displayName:"Actionable",propTypes:{handler:y.func,progressMapper:y.func},getDefaultProps:function(){return{handler:function(){},progressMapper:function(e,t){return{disabled:e||t.disabled}}}},getInitialState:function(){return{inProgress:!1}},onClick:function(){var e,t;if(!this.state.inProgress)return t="function"==typeof(e=this.props).handler?e.handler():void 0,t&&"function"==typeof t.complete?(this.setState({inProgress:!0}),t.complete(function(e){return function(){return e.isMounted()?e.setState({inProgress:!1}):void 0}}(this))):void 0},render:function(){var e,a,o,s,r;a={},o=this.props;for(e in o)r=o[e],"handler"!==e&&"children"!==e&&"progressMapper"!==e&&(a[e]=r);a.onClick=this.onClick,a.inProgress=this.state.inProgress,s=this.props.progressMapper(this.state.inProgress,a);for(e in s)r=s[e],a[e]=r;return t.cloneElement(t.Children.only(this.props.children),a)}}),u=t.createClass({displayName:"DboxAppPromoBanner",propTypes:{title:y.string,description:y.string,buttons:y.arrayOf(y.shape({text:y.string,handler:y.func}))},render:function(){var e,t;return v.div({className:"dbox-app-promo-banner"},v.div({className:"dbox-app-promo-banner-body"},v.div({className:"dbox-app-promo-banner-title"},this.props.title),v.div({className:"dbox-app-promo-banner-description"},this.props.description)),v.div({className:"dbox-app-promo-banner-buttons"},function(){var a,o,s,i;for(s=this.props.buttons,i=[],t=a=0,o=s.length;o>a;t=++a)e=s[t],i.push(v.span({className:"dbox-app-promo-banner-button",key:"button-"+t},b(m,{handler:e.handler},b(r.button,{importance:"tertiary"},e.text))));return i}.call(this)),v.div({className:"clear"}))}}),d=t.createClass({displayName:"DboxAppPromoHeader",propTypes:{title:y.string,text:y.string,rightComponent:y.element,primaryButtonText:y.string,primaryButtonHandler:y.func,primaryButtonDisabled:y.bool,primaryElement:y.element,otherButtons:y.arrayOf(y.shape({text:y.string,handler:y.func})),reversePrimaryButton:y.bool,calloutBanner:y.shape({title:y.string,description:y.string,buttons:y.arrayOf(y.shape({text:y.string,handler:y.func})),positionBelowTitle:y.bool})},renderPrimaryAction:function(){return this.props.primaryElement?this.props.primaryElement:this.props.primaryButtonText&&this.props.primaryButtonHandler?b(m,{handler:this.props.primaryButtonHandler,disabled:this.props.primaryButtonDisabled},b(r.button,{importance:"primary"},this.props.primaryButtonText)):void 0},render:function(){var t,a;return t={"dbox-app-promo-header":!0,clearfix:!0},this.props.className&&(t[this.props.className]=!0),v.div({className:e(t)},b(g,{transitionName:"dbox-app-promo-banner"},this.props.calloutBanner&&!this.props.calloutBanner.positionBelowTitle?b(u,this.props.calloutBanner):void 0),v.div({className:"dbox-app-promo-header-body"},this.props.rightComponent?v.div("right-component",v.div({className:"dbox-app-promo-header-right-component"},this.props.rightComponent)):void 0,v.div({className:"dbox-app-promo-header-text"},v.div({className:"dbox-app-promo-header-h1"},this.props.title),v.div({className:"dbox-app-promo-header-h2"},this.props.text)),b(g,{transitionName:"dbox-app-promo-banner"},this.props.calloutBanner&&this.props.calloutBanner.positionBelowTitle?b(u,this.props.calloutBanner):void 0),v.div({className:"dbox-app-promo-cta"},this.props.reversePrimaryButton?void 0:this.renderPrimaryAction(),function(){var e,t,o,s;if(this.props.otherButtons){for(o=this.props.otherButtons,s=[],e=0,t=o.length;t>e;e++)a=o[e],s.push(b(m,{handler:a.handler,disabled:a.disabled},b(r.button,{className:"banner-button",importance:"tertiary"},a.text)));return s}}.call(this),this.props.reversePrimaryButton?this.renderPrimaryAction():void 0),v.div({className:"dbox-app-promo-more-content"},this.props.children)))}}),p=t.createClass({displayName:"DboxAppPromoGrid",propTypes:{columns:y.arrayOf(y.shape({title:y.string,text:y.string,imageSource:y.string,imageSourceHiRes:y.string}))},getDefaultProps:function(){return{columns:[]}},render:function(){var e,t;return v.div({className:"dbox-app-promo-3pane"},v.div({className:"dbox-app-promo-grid"},function(){var a,o,s,r;for(s=this.props.columns,r=[],t=a=0,o=s.length;o>a;t=++a)e=s[t],r.push(v.div({className:"dbox-app-promo-grid-column",key:"c_"+t},e.imageSource&&e.imageSourceHiRes?v.div({className:"pane-image"},b(i,{src:T(e.imageSource),srcHiRes:T(e.imageSourceHiRes)})):void 0,e.title?v.div({className:"pane-title"},e.title):void 0,v.div({className:"pane-text"},e.text)));return r}.call(this)))}}),h=t.createClass({displayName:"DboxAppPromoImageText",propTypes:{imageSource:y.string,imageSourceHiRes:y.string,title:y.string,text:y.string,isImagePrimary:y.bool},getDefaultProps:function(){return{isImagePrimary:!0}},render:function(){var t,a;return a=e({"dbox-app-promo-image-text-pane":!0,"dbox-app-promo-image-text-image-pane":!0,"primary-position":this.props.isImagePrimary,"secondary-position":!this.props.isImagePrimary}),t=e({"dbox-app-promo-image-text-pane":!0,"dbox-app-promo-image-text-content-pane":!0,"primary-position":!this.props.isImagePrimary,"secondary-position":this.props.isImagePrimary}),v.div({className:"dbox-app-promo-image-text"},v.div({className:a},b(i,{src:T(this.props.imageSource),srcHiRes:T(this.props.imageSourceHiRes)})),v.div({className:t},v.div({className:"dbox-app-promo-image-text-title"},this.props.title),v.div({className:"dbox-app-promo-image-text-text"},this.props.text,this.props.children)),v.div({className:"clear"}))}},l=t.createClass({displayName:"DboxAppFeatureList",propTypes:{items:y.arrayOf(y.shape({imageSource:y.string,imageSourceHiRes:y.string,title:y.string,description:y.string}))},render:function(){var e,t;return v.ul({className:"dbox-app-promo-feature-list"},function(){var a,o,s,r;for(s=this.props.items,r=[],e=a=0,o=s.length;o>a;e=++a)t=s[e],r.push(v.li({className:"dbox-app-promo-feature-item",key:"i_"+e},v.div({className:"dbox-app-promo-feature-title"},v.span({className:"dbox-app-promo-feature-bullet"},b(i,{src:T(t.imageSource),srcHiRes:T(t.imageSourceHiRes)})),v.span({className:"dbox-app-promo-feature-title-text"},t.title)),v.div({className:"dbox-app-promo-feature-description"},t.description)));return r}.call(this))}}),_=t.createClass({displayName:"DboxAppPromoSection",propTypes:{className:y.string},render:function(){return v.div({className:e(this.props.className,"dbox-app-promo-section")},this.props.children)}})),{Actionable:m,DboxAppPromo:c,DboxAppPromoBanner:u,DboxAppPromoHeader:d,DboxAppPromoGrid:p,DboxAppPromoImageText:h,DboxAppFeatureList:l,DboxAppPromoSection:_}})}.call(this),function(){define("modules/clean/react/lightbox_video_modal",["external/classnames","external/react","external/react-dom","jquery","modules/core/i18n","modules/core/notify","modules/clean/react/modal"],function(e,t,a,o,s,r,i){var n,m,l,c,u;return l=s._,m=i.Modal,c=t.DOM,u=t.PropTypes,n=t.createClass({propTypes:{embed_src:u.string,embed_poster:u.string,autoplay:u.bool,vimeo_id:u.string,size:u.shape({width:u.number,height:u.number})},getDefaultProps:function(){return{size:{width:600,height:375},autoplay:!0}},statics:{show_vimeo:function(e,a){return m.showInstance(t.createElement(n,{vimeo_id:e,size:a}))},show:function(e,a,o){return m.showInstance(t.createElement(n,{embed_src:e,embed_poster:a,size:o}))}},embedVideoLoader:function(){var e;return e=o(a.findDOMNode(this.refs.lightboxVideoPlayer)),require(["modules/clean/video_loader"],function(t){return function(a){return t.player=a.embed(e,{src:t.props.embed_src,type:"video/mp4",width:e.width(),height:e.height(),controls:!0,preload:"auto",autoplay:t.props.autoplay,poster:t.props.embed_poster,onError:t.onVideoLoaderError})}}(this))},onVideoLoaderError:function(){return r.error(l("Couldn’t load video"))},componentDidMount:function(){return this.props.embed_src?this.embedVideoLoader():void 0},renderVimeoVideoPlayer:function(){var e;return e="https://player.vimeo.com/video/"+this.props.vimeo_id+"?color=1c88d8&title=0&byline=0&autoplay="+this.props.autoplay,c.iframe({ref:"vimeoPlayer",src:e,width:this.props.size.width,height:this.props.size.height,frameborder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0,style:{border:"none"}})},render:function(){return t.createElement(m,{className:"paper-promo-video-modal",style:"lightbox",width:this.props.size.width},c.div({className:"lightbox-video-modal-container"},c.div({ref:"lightboxVideoPlayer",className:"lightbox-video-modal-player",style:{width:this.props.size.width,height:this.props.size.height,"background-color":"#000"}},this.props.vimeo_id?this.renderVimeoVideoPlayer():void 0)))}})})}.call(this),function(){define("modules/clean/react/notes/notes_dbox_landing_page",["jquery","external/react","external/underscore","modules/core/browser","modules/core/notify","modules/core/uri","modules/clean/react/dbox_app_promo","modules/clean/react/lightbox_video_modal","modules/clean/react/modal","modules/clean/ajax","modules/clean/analytics","modules/clean/react/button","modules/clean/react/image","modules/clean/react/input","modules/clean/static_urls"],function(e,t,a,o,s,r,i,n,m,l,c,u,p,d,h){var _,g,f,b,v,y,T,E,C,N,S,x,P,w,k,R,A,I,M;return f=i.DboxAppPromo,b=i.DboxAppPromoGrid,v=i.DboxAppPromoImageText,g=i.DboxAppFeatureList,y=i.DboxAppPromoSection,E=m.Modal,w=c.TeamsWebActionsLogger,M=h.static_url,A=t.DOM,I=t.PropTypes,R=t.createElement,P=t.addons.CSSTransitionGroup,T=t.addons.LinkedStateMixin,_=u.button,k=d.text,S=t.createClass({displayName:"NotesDboxLandingPage",propTypes:{cont:I.string,promptWorkEmail:I.bool},getInitialState:function(){return{tosAgree:!1,onWaitlist:this.props["on-waitlist"]}},componentDidMount:function(){return e(".notes-footer-container").css("display","block"),e(window).on("scroll",this._onScroll),this._onScroll()},onVideoThumbnailClicked:function(e){return e.preventDefault(),E.showInstance(R(n,{vimeo_id:"142162581",size:{width:800,height:498},autoplay:!0}))},onVideoUtilError:function(){return s.error("There was an error loading the video")},renderPromoContent:function(){return A.div({},A.div({className:"notes-promo-video-container"},A.a({onClick:this.onVideoThumbnailClicked,href:"#"},R(p,{alt:"Watch video",className:"notes-promo-video-preview",src:M("/static/images/notes/promo/video_placeholder-vflS5l-3f.png"),srcHiRes:M("/static/images/notes/promo/video_placeholder@2x-vflHrlMeU.png")}))),R(y,{className:"notes-more-than-words-section"},R(v,{title:"More than words",text:"Create the way you want, with what you want. Paper adapts to the way your team captures ideas.",imageSource:"/static/images/notes/promo/more_than_words-vflVIwe9Q.png",imageSourceHiRes:"/static/images/notes/promo/more_than_words@2x-vflVtPSgS.png",isImagePrimary:!0},R(g,{items:[{key:"embeds",imageSource:"/static/images/notes/promo/embeds-vflVnfC0G.png",imageSourceHiRes:"/static/images/notes/promo/embeds@2x-vflOgaVXR.png",title:"Embeds",description:"Keep using the apps you love. Embed files from YouTube, Google, and of course, Dropbox."},{key:"task_list",imageSource:"/static/images/notes/promo/task_list-vfl4jHXw6.png",imageSourceHiRes:"/static/images/notes/promo/task_list@2x-vflmEGbLO.png",title:"Task lists",description:"Make lists, even nested ones, to track tasks, big or small."},{key:"code",imageSource:"/static/images/notes/promo/code-vfl1bUUDb.png",imageSourceHiRes:"/static/images/notes/promo/code@2x-vflmbhl4Y.png",title:"Code",description:"Auto formatting makes it simple to create with code blocks."}]}))),R(y,{className:"notes-collaborate-section"},R(v,{title:"Collaborate at the speed of thought",text:"Give and get fast feedback right where your ideas are created.",imageSource:"/static/images/notes/promo/collaborate_screenshot-vflaW9iG9.png",imageSourceHiRes:"/static/images/notes/promo/collaborate_screenshot@2x-vflbDV-KT.png",isImagePrimary:!0},R(g,{items:[{key:"share",imageSource:"/static/images/notes/promo/share_instantly-vfln3OOdq.png",imageSourceHiRes:"/static/images/notes/promo/share_instantly@2x-vfl8sNF__.png",title:"Share instantly",description:"Send docs with just a click to whoever you choose—one person, your team, or your entire company."},{key:"iterate",imageSource:"/static/images/notes/promo/iterate-vflsHRVWX.png",imageSourceHiRes:"/static/images/notes/promo/iterate@2x-vflKEfcec.png",title:"Iterate in real time",description:"Work with your team at the same time, in the same doc. See feedback and edits immediately."},{key:"comment",imageSource:"/static/images/notes/promo/comment-vfl2S5sm9.png",imageSourceHiRes:"/static/images/notes/promo/comment@2x-vflnAx73-.png",title:"Comment with style",description:"Share thoughts quickly with inline comments. Make it fun with stickers."}]}))),R(y,{className:"notes-all-in-one-place-section"},A.div({className:"notes-dbox-app-section-header-text"},A.div({className:"notes-dbox-app-section-title"},"Your team's ideas, all in one place")),R(b,{columns:[{title:"Folders",text:"Keep docs organized and searchable in team folders. Share them with anyone you choose, wherever they are.",imageSource:"/static/images/notes/promo/folder_faces-vflH466KI.png",imageSourceHiRes:"/static/images/notes/promo/folder_faces@2x-vfly8pOYE.png"},{title:"Search",text:"Easily and quickly track down exactly what you're looking for, or discover what other teams in your company are creating.",imageSource:"/static/images/notes/promo/search-vflV_upr4.png",imageSourceHiRes:"/static/images/notes/promo/search@2x-vflP78TDq.png"}]})),A.div({className:"notes-dbox-app-section-divider"}),R(y,{className:"notes-get-inspired-section"},A.div({className:"notes-dbox-app-section-header-text"},A.div({className:"notes-dbox-app-section-title"},"Get inspired"),A.div({className:"notes-dbox-app-section-text"},"Here's how Paper helps teams work together.")),R(b,{columns:[{title:"Document features",text:"Get everyone on the same page about functionality, workflows, and dependencies.",imageSource:"/static/images/notes/promo/example_note_1-vflw4NFz2.png",imageSourceHiRes:"/static/images/notes/promo/example_note_1@2x-vflugINmY.png"},{title:"Take meeting notes",text:"Create a template to make it easy to capture the details that come out of weekly syncs.",imageSource:"/static/images/notes/promo/example_note_2-vfl_1cF8f.png",imageSourceHiRes:"/static/images/notes/promo/example_note_2@2x-vfl9qpbBe.png"},{title:"Brainstorm ideas",text:"Tackle big ideas, together in the same doc, at the same time.",imageSource:"/static/images/notes/promo/example_note_3-vflCFfwlP.png",imageSourceHiRes:"/static/images/notes/promo/example_note_3@2x-vfltURrpW.png"}]})))},render:function(){return A.div({},R(f,{className:"notes-dbox-app-promo"},this.renderPromoContent(null)))},_onScroll:function(){return e(window).scrollTop()>30?e(".paper-header").addClass("paper-header-scrolled"):e(".paper-header").removeClass("paper-header-scrolled")}}),C=t.createClass({mixins:[T],displayName:"NotesAskForEmailForm",propTypes:{autoFocus:I.bool,ctaButtonText:I.string,onSuccess:I.func,promptWorkEmail:I.bool},getInitialState:function(){return{email:"",submitting:!1}},componentWillMount:function(){return this._emailInputId="email-input-"+Math.floor(1e9*Math.random())},componentDidMount:function(){return this.props.autoFocus?this._focusEmailInput():void 0},_focusEmailInput:function(){return e("#"+this._emailInputId).focus()},_onCTAClick:function(){var e;return e={cta_text:this.props.ctaButtonText,prompt_work_email:this.props.promptWorkEmail},w.log("homepage_enter_email_info",e),this.setState({submitting:!0}),l.WebRequest({url:"/paper/email_info",data:{email:this.state.email},success:function(e){return function(t){var a;return e.setState({errors:null}),t=JSON.parse(t),"function"==typeof(a=e.props).onSuccess?a.onSuccess(e.state.email,t.existing,t.is_business_domain):void 0}}(this),error:function(e){return function(t,a,o){var r,i;try{e.setState({errors:JSON.parse(o)})}catch(e){r=e,s.error()}return e._focusEmailInput()}}(this),complete:function(e){return function(){return e.setState({submitting:!1})}}(this)})},_onKeyDown:function(e){return"Enter"===e.key?this._onCTAClick():void 0},_renderError:function(){var e;return R(P,{transitionName:"notes-ask-for-work-email-form-error"},(null!=(e=this.state.errors)?e.email:void 0)?A.div({className:"notes-ask-for-work-email-form-error"},this.state.errors.email.message_text||this.state.errors.email.message_html):void 0)},render:function(){return A.div({className:"notes-ask-for-work-email-form"},this._renderError(),R(k,{id:this._emailInputId,className:"u-mar-right-xs u-mar-bottom-s",placeholder:this.props.promptWorkEmail?"Your work email":"name@company.com","disable-errors":!0,autoCorrect:!1,autoCapitalize:!1,spellCheck:!1,disabled:this.state.submitting,valueLink:this.linkState("email"),onKeyDown:this._onKeyDown}),R(_,{className:"u-trim-margin u-mar-bottom-s",variant:"big",onClick:this._onCTAClick,disabled:this.state.submitting},this.props.ctaButtonText))}}),x=t.createClass({displayName:"NotesGetStartedForm",propTypes:{autoFocus:I.bool,promptWorkEmail:I.bool},render:function(){return A.div({className:"notes-signin-form-container get-started-form"},R(C,{autoFocus:this.props.autoFocus,ctaButtonText:"Get started",promptWorkEmail:this.props.promptWorkEmail,onSuccess:function(e,t,a){return t?o.redirect(r({path:"/login",query:{email:e,cont:"/paper"}})):a?o.redirect(r({path:"/paper/register",query:{email:e}})):E.showInstance(R(N,{email:e}))}}))}}),N=t.createClass({displayName:"NotesConsumerDomainModal",propTypes:{email:I.string},getInitialState:function(){return{askForEmail:!1}},componentDidMount:function(){return e(".notes-consumer-domain-modal__cta").focus()},_onCTAClick:function(){return this.setState({askForEmail:!0})},_onSkipClick:function(){return o.redirect(r({path:"/paper/register",query:{email:this.props.email}}))},_renderIntro:function(){return A.div(null,A.div({className:"notes-consumer-domain-modal__title u-mar-bottom-s"},"Sign up with your work email"),A.div({className:"notes-consumer-domain-modal__content u-mar-bottom-xs"},A.span({className:"notes-consumer-domain-modal__content-email"},this.props.email)," looks like a personal email address. The best features in Dropbox Paper only work when you sign up with a work email address."),R(_,{className:"notes-consumer-domain-modal__cta u-mar-bottom-xs",variant:"big",onClick:this._onCTAClick},"Enter work email address"),A.div({className:"notes-consumer-domain-modal__skip-link",onClick:this._onSkipClick},"Continue with this email address"))},_renderAskForEmail:function(){return A.div(null,A.div({className:"notes-consumer-domain-modal__title u-mar-bottom-s"},"Sign up"),A.div({className:"notes-consumer-domain-modal__content u-mar-bottom-m"},"We’ll check and see if anyone else from your company is using Dropbox Paper."),A.div({className:"u-mar-bottom-s"},R(C,{autoFocus:!0,ctaButtonText:"Sign up",promptWorkEmail:!0,onSuccess:function(e,t,a){return t?o.redirect(r({path:"/login",query:{email:e,cont:"/paper"}})):o.redirect(r({path:"/paper/register",query:{email:e}}))}})))},render:function(){return R(E,{className:"notes-consumer-domain-modal",style:"clean",buttonComponent:A.div()},this.state.askForEmail?this._renderAskForEmail():this._renderIntro())}}),{NotesDboxLandingPage:S,NotesAskForEmailForm:C,NotesGetStartedForm:x,NotesConsumerDomainModal:N}})}.call(this),function(){define("modules/clean/teams/constants",["external/underscore","modules/core/i18n","modules/constants/teams"],function(e,t,a){var o,s,r,i,n,m,l,c,u,p,d,h,_,g,f,b,v,y;return y=t._,n={ACTIVE:1,PENDING:2,ERROR:3,REMOVED:4,SUSPENDED:5},v={PENDING_TEAM_ADMIN:11100,PENDING_ACCOUNTS_ADMIN:11200,PENDING_SUPPORT_ADMIN:11300,PENDING_MEMBER:12e3,TEAM_ADMIN:21100,ACCOUNTS_ADMIN:21200,SUPPORT_ADMIN:21300,MEMBER:22e3,SUSPENDED:3e4,REMOVED:4e4},s={SUPER:0,USER_MANAGEMENT:1,HELPDESK:2,CUSTOM:3,LIMITED:4,NONE:-1},o={NONE:0,UPLOAD_MODAL:1,TEAM_TAB_TOOLTIP:2,INVITATION_TOOLTIP:3,GROUP_TAB_TOOLTIP:4,SETTINGS_TOOLTIP:5,PAPER_TAB_TOOLTIP:6,DONE:1e3,UPLOADED_FILE:1001},r={0:y("Team Admin"),1:y("User Management Admin"),2:y("Support Admin"),3:y("Custom Admin"),4:y("Limited Admin")},c={NONE:0,LIMITED_TEAM_ADMIN:1,CDM_MVE_ADMIN:2,CDM_MVE_USER:3},_={FULL:0,FREE:1},g={},g[_.FREE]=y("Limited"),g[_.FULL]=y("Full"),h={DISCOVERY_DISABLED:1,CAN_AUTO_JOIN:3,APPROVAL_REQUIRED:4,WAITING_FOR_APPROVAL:5,REQUEST_APPROVED:6,REQUEST_REJECTED_OPEN:7,REQUEST_REJECTED_DISMISSED:8},i={PENDING:1,APPROVED:2,REJECTED:3},p={REQUIRE_APPROVAL:0,AUTO_ACCEPT:1,DISABLED:2},u={FOR_USER:0,FOR_ADMIN:1},l={TEAM:0,PUBLIC:1},m={},m[l.TEAM]=y("Just people on my team with the link"),m[l.PUBLIC]=y("Anyone with the link"),d={EXISTING_TEAM:0,PROVISION:10,TEAM_FOLDER:20,FINISHING_UP:30,COMPLETED:100},f={WELCOME:1,VERIFY_EMAIL:2,JOIN_EXISTING:3,CHOOSE_TEAM_NAME:4,CHOOSE_SETUP_TYPE:5,CREATE_COMPLETE:6},b={JOIN_STATES:n,USER_TYPES:v,ADMIN_ROLE:s,ADMIN_ROLE_NAMES:r,ADMIN_ONBOARDING_STATES:o,TEAM_MEMBERSHIP_TYPES:_,TEAM_MEMBERSHIP_TYPE_LABELS:g,TEAM_JOIN_REQUEST_STATE:h,JOIN_REQUEST_STATUS:i,REQUEST_MEMBERSHIP_POLICY_VALUES:p,REQUEST_MEMBERSHIP_POLICY_LABEL_VARIANTS:u,NOTES_LINK_POLICY_VALUES:l,NOTES_LINK_POLICY_LABELS:m,ONBOARDING_TYPES:c,SETUP_WIZARD_STEP:d,TEAM_PROMO_STEPS:f},e.extend(b,a),b})}.call(this),function(){define("modules/clean/teams/dbox_app_team_promo_grid",["external/react","modules/clean/react/dbimg"],function(e,t){var a,o,s;return o=e.DOM,s=e.PropTypes,a=e.createClass({displayName:"DboxAppTeamPromoGrid",propTypes:{columns:s.arrayOf(s.shape({title:s.string,imageSource:s.string,text:s.string,altText:s.string})),dbimgCache:s.object},getDefaultProps:function(){return{columns:[]}},render:function(){var a,s;return o.div({className:"dbox-app-promo-3pane"},o.div({className:"grid"},function(){var r,i,n,m;for(n=this.props.columns,m=[],s=r=0,i=n.length;i>r;s=++r)a=n[s],m.push(o.div({className:"grid__col grid__col--1-of-3",key:"col"+s},o.div({className:"pane-title"},a.title),e.createElement(t,{className:"pane-image",alt:a.altText,src:a.imageSource,imgSrcCache:this.props.dbimgCache,localized:!0}),o.div({className:"pane-text"},a.text)));return m}.call(this)))}})})}.call(this),function(){define("modules/clean/teams/limited_team_create_modal",["jquery","external/classnames","external/react","modules/core/browser","modules/core/i18n","modules/core/notify","modules/clean/analytics","modules/clean/ajax","modules/clean/react/button","modules/clean/react/modal","modules/clean/react/input","modules/clean/teams/constants","modules/clean/teams/limited_team_invite_form","modules/clean/teams/new_limited_team_create_form","modules/clean/teams/request_membership_policy_select","modules/clean/viewer","modules/clean/contacts/data","modules/clean/contacts/types"],function(e,t,a,o,s,r,i,n,m,l,c,u,p,d,h,_,g,f){var b,v,y,T,E,C,N,S,x,P,w,k,R,A,I;return x=i.TeamsWebActionsLogger,E=l.Modal,N=u.REQUEST_MEMBERSHIP_POLICY_VALUES,C=u.REQUEST_MEMBERSHIP_POLICY_LABEL_VARIANTS,v=g.Contact,k=a.DOM,w=a.createElement,A=a.PropTypes,b=m.button,P=function(e){return s._(e,{project:"limited-team"})},S=P("I understand that any member can upgrade my team to Dropbox Business, which will give them administrative control over the team."),I=_.get_viewer(),R=function(e){return e.toLowerCase().split("@")[1]},y=a.createClass({displayName:"LimitedTeamCreateForm",mixins:[a.addons.LinkedStateMixin],propTypes:{canSetTeamRequestMembershipPolicy:A.bool,company_name:A.string,suggested_contacts:A.array,notes_link_policy:A.number,onSuccess:A.func,onCancel:A.func},getInitialState:function(){return{companyName:this.props.company_name,requestMembershipPolicy:N.AUTO_ACCEPT,tosAgree:!1,errors:null,custom_message:null,emails:null}},componentWillMount:function(){var e;return this.setState({emails:function(){var t,a,o,s;for(o=this.props.suggested_contacts,s=[],t=0,a=o.length;a>t;t++)e=o[t],s.push(e.email);return s}.call(this)})},_validateInputs:function(){var e,t;return t=this.state,this.state.errors||(t.errors={}),e=!0,0===this.state.companyName.trim().length?(t.errors.team_name={message_text:P("Please enter a company name.")},e=!1):delete t.errors.team_name,this.refs["invite-form"].areAllContactsValid()||(e=!1),e&&delete t.errors,this.setState(t),e},onClickCreate:function(e){return e.preventDefault(),!this.state.submitting&&this._validateInputs()?this.refs["invite-form"].getFinalData(function(e){return function(t){var a,o;return o=t.emails,a=t.custom_message,e.refs["invite-form"].areAllContactsValid()?e.setState({emails:o,custom_message:a},function(){return e.submitFinalData()}):void 0}}(this)):void 0},onClickConfirm:function(e){return e.preventDefault(),this.state.submitting?void 0:this.submitFinalData()},submitFinalData:function(){var e;return this.setState({submitting:!0}),n.WebRequest({url:"/team/create_limited",data:{team_name:this.state.companyName,tos_agree:"True",emails:this.state.emails,custom_message:this.state.custom_message,suggested_emails:function(){var t,a,o,s;for(o=this.props.suggested_contacts,s=[],t=0,a=o.length;a>t;t++)e=o[t].email,s.push(e);return s}.call(this),request_membership_policy:this.props.canSetTeamRequestMembershipPolicy?this.state.requestMembershipPolicy:void 0,notes_link_policy:this.props.notes_link_policy,_tk:window.location.pathname},complete:function(e){return function(){return e.setState({submitting:!1})}}(this),success:function(e){return function(){return e.props.onSuccess?e.props.onSuccess():o.redirect("/team")}}(this),error:function(e){return function(t,a,o){return"rate-limit"===t.getResponseHeader("x-dropbox-app-error")?void r.error(P("You can’t create more than two teams per user account. Please reach out to support if you’d like to create a new team.")):e.setState({errors:function(){try{return JSON.parse(o)}catch(e){}
}(),showConfirmModal:!1})}}(this)})},render:function(){var e,a,o;return a=function(){var t,a,o,s;for(o=this.state.emails,s=[],t=0,a=o.length;a>t;t++)e=o[t],s.push(new v({email:e,type:f.EMAIL}));return s}.call(this),k.div({className:"CreateLimitedTeamForm"},k.div({className:"CreateLimitedTeamForm-labelHeader"},P("Company name")),w(c.text,{valueLink:this.linkState("companyName"),autoComplete:"off",className:"CreateLimitedTeamForm-company-name-input",placeholder:P("Company or organization name"),error:null!=(o=this.state.errors)?o.team_name:void 0}),k.div({className:"CreateLimitedTeamForm-labelHeader"},P("Invite team members")),w(p,{ref:"invite-form",user:I.personal_user,invitationContext:p.InvitationContexts.createLimitedTeam,populatedContacts:a,populatedCustomMessage:this.state.custom_message,autofocusTokenizer:!1}),this.props.canSetTeamRequestMembershipPolicy?w(h,{labelVariant:C.FOR_USER,teamDomain:R(I.personal_user.email),valueLink:this.linkState("requestMembershipPolicy")}):void 0,k.div({className:"o-flag o-flag--rev CreateLimitedTeamForm-actionPanel o-flag--top"},k.div({className:"CreateLimitedTeamForm-actionButtonWrapper o-flag__fix"},k.span({className:t({"dbmodal-loading":!0,hidden:!this.state.submitting})},k.img({src:"/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"})),this.props.onCancel?w(b,{importance:"secondary",className:"CreateLimitedTeamForm-cancelButton",onClick:this.props.onCancel},P("Not Now")):void 0,w(b,{className:"CreateLimitedTeamForm-actionButton",onClick:this.onClickCreate},P("Create team")))))}}),T=a.createClass({displayName:"LimitedTeamCreateModal",propTypes:{suggestedContacts:A.array,canSetTeamRequestMembershipPolicy:A.bool,onSuccess:A.func,selectedOptionInTeamCreateForm:A.oneOf(["personal","work"]),showOnboardingOnTeamCreation:A.bool},getDefaultProps:function(){return{suggestedContacts:[]}},statics:{show:function(e){var t;return e.suggestedMembers&&(e.suggestedContacts=function(){var a,o,s,r;for(s=e.suggestedMembers,r=[],a=0,o=s.length;o>a;a++)t=s[a],r.push(new v({type:f.EMAIL,name:t.display_name,email:t.email}));return r}()),E.showInstance(w(T,e))}},render:function(){var e;return e={title:P("Create a Team"),ref:"modal",acceptButtonText:null,width:640,onShow:function(){return x.log("clicked_create_team_cta")},onDismiss:function(){return x.log("dismissed_create_team_modal")}},w(E,e,w(d,{onSuccess:this.props.onSuccess,personalUser:I.personal_user,defaultMigrationType:this.props.selectedOptionInTeamCreateForm,showOnboardingOnTeamCreation:this.props.showOnboardingOnTeamCreation}))}}),{LimitedTeamCreateForm:y,LimitedTeamCreateModal:T}})}.call(this),function(){define("modules/clean/teams/limited_team_invite_and_settings_modal",["external/react","external/underscore","modules/core/browser","modules/core/html","modules/core/i18n","modules/core/notify","modules/clean/analytics","modules/clean/ajax","modules/clean/contacts/data","modules/clean/teams/constants","modules/clean/teams/limited_team_invite_form","modules/clean/teams/request_membership_policy_select","modules/clean/react/modal","modules/clean/viewer"],function(e,t,a,o,s,r,i,n,m,l,c,u,p,d){var h,_,g,f,b,v,y,T,E;return b=s._,E=s.ungettext,f=i.TeamsWebActionsLogger,h=m.Contact,g=l.REQUEST_MEMBERSHIP_POLICY_LABEL_VARIANTS,_=p.Modal,v=e.createElement,y=e.DOM,T=e.PropTypes,e.createClass({displayName:"LimitedTeamInviteAndSettingsModal",mixins:[e.addons.LinkedStateMixin],propTypes:{viewer:T.instanceOf(d),onInvited:T.func,onDismissCompleted:T.func,canSetTeamRequestMembershipPolicy:T.bool,initialTeamRequestMembershipPolicy:T.number.isRequired,suggested_contacts:T.arrayOf(T.instanceOf(h)),memberInviteLimit:T.number,maxTeamSize:T.number},getDefaultProps:function(){return{viewer:d.get_viewer()}},getInitialState:function(){return{requestMembershipPolicy:this.props.initialTeamRequestMembershipPolicy,submitting:!1,canProceed:!1}},componentDidMount:function(){return this._checkCanProceed()},_checkCanProceed:function(){var e;return this.setState({canProceed:null!=(e=this.refs.inviteForm)?e.areAllContactsValid():void 0})},_tryInviteMembersIfAny:function(e){return this.refs.inviteForm.getFinalData(function(a){return function(s){var i,m;return m=s.emails,i=s.custom_message,0===m.length?e(0):(a.setState({submitting:!0}),n.WebRequest({url:"/account/team/add_users",subject_user:a.props.viewer.work_user,data:{emails:m,custom_message:i,team_id:a.props.viewer.team_id},success:function(o){var s;return o=JSON.parse(o),s=t.values(o.users),s.length>0?e(s.length):(r.error(),a.setState({submitting:!1}))},error:function(e){return"rate-limit"===e.getResponseHeader("x-dropbox-app-error")?r.error(new o(b('%(team_name)s has reached the maximum number of team members allowed on Dropbox Basic. Please <a href="/business/contact">contact sales</a> to add more members to your team.').format({team_name:a.props.viewer.team_name}))):r.error(),a.setState({submitting:!1})}}))}}(this))},_setPolicyIfChanged:function(e){return this.props.canSetTeamRequestMembershipPolicy&&this.props.initialTeamRequestMembershipPolicy!==this.state.requestMembershipPolicy?(this.setState({submitting:!0}),n.WebRequest({url:"/team/manage/set_request_membership_policy",data:{new_team_policy:this.state.requestMembershipPolicy},error:function(e){return function(){return e.setState({submitting:!1}),r.error()}}(this),success:function(t){return function(){return e(!0)}}(this)})):e(!1)},_onCTAButtonClick:function(){return!this.state.submitting&&this.state.canProceed?this._tryInviteMembersIfAny(function(e){return function(t){var a;return t>0&&"function"==typeof(a=e.props).onInvited&&a.onInvited(),e._setPolicyIfChanged(function(a){var o;return e._notifyTeamCreated(),f.log("confirm_clicked_invite_members",{num_invited_users:t,new_team_discovery:a?e.state.requestMembershipPolicy:null,dismiss:!1}),e.refs.modal.close(),"function"==typeof(o=e.props).onDismissCompleted?o.onDismissCompleted(a):void 0})}}(this)):void 0},_notifyTeamCreated:function(){return r.success(b("%(team_name)s team successfully created!").format({team_name:this.props.viewer.team_name}))},_logDismiss:function(){return f.log("confirm_clicked_invite_members",{num_invited_users:0,new_team_discovery:null,dismiss:!0})},_handleDismiss:function(){return this._logDismiss(),this._notifyTeamCreated()},render:function(){var e,t;return t=this.props.viewer.work_user,e=t.email.toLowerCase().split("@")[1],v(_,{ref:"modal",className:"invite-and-settings-modal",title:b("Invite your first team members!"),acceptButtonText:b("Continue"),onAccept:this._onCTAButtonClick,onDismiss:this._handleDismiss,onDismissCompleted:this.props.onDismissCompleted,autoClose:!1,submitting:this.state.submitting,acceptButtonDisabled:this.state.submitting||!this.state.canProceed},y.div({className:"invite-form-label"},b("Invite Members")),v(c,{ref:"inviteForm",customClass:"invite-form",user:t,invitationContext:c.InvitationContexts.existingTeam,populatedContacts:this.props.suggested_contacts,onChange:this._checkCanProceed,memberInviteLimit:this.props.memberInviteLimit,maxTeamSize:this.props.maxTeamSize}),this.props.canSetTeamRequestMembershipPolicy?v(u,{labelVariant:g.FOR_ADMIN,teamDomain:e,valueLink:this.linkState("requestMembershipPolicy")}):null)}})})}.call(this),function(){define("modules/clean/teams/new_limited_team_create_form",["external/purify","external/react","external/underscore","modules/core/browser","modules/core/i18n","modules/core/notify","modules/core/uri","modules/clean/ajax","modules/clean/analytics","modules/clean/react/button","modules/clean/react/input","modules/clean/react/radio","modules/clean/react_format","modules/clean/components/title_bubble","modules/clean/teams/constants","modules/clean/user"],function(e,t,a,o,s,r,i,n,m,l,c,u,p,d,h,_){var g,f,b,v,y,T,E,C,N,S,x,P,w,k,R,A;return P=s._,f=s.E_,S=m.TeamsWebActionsLogger,T=u.RadioGroup,E=u.RadioItem,C=u.RadioItemVariant,A=p.reactFormat,y=h.REQUEST_MEMBERSHIP_POLICY_VALUES,w=t.createElement,k=t.DOM,R=t.PropTypes,x=c.text,v=c.password,g=l.button,b=t.addons.LinkedStateMixin,N=t.addons.CSSTransitionGroup,t.createClass({mixins:[b],displayName:"NewLimitedTeamCreateForm",propTypes:{personalUser:R.instanceOf(_),defaultMigrationType:R.oneOf(["personal","work"]),onSuccess:R.func,showOnboardingOnTeamCreation:R.bool,isPagelet:R.bool},getDefaultProps:function(){return{defaultMigrationType:"work",isPagelet:!1}},getInitialState:function(){return{teamName:"",migrationType:this.props.defaultMigrationType,email:"",password:"",tosChecked:!1,errors:{},serverErrors:{},submitting:!1}},componentDidUpdate:function(){return this._updateErrors()},_getErrors:function(){var e;return e={},0!==this.state.teamName.trim().length||this.props.isPagelet||(e.team_name={message_text:P("Please enter a company name")}),"personal"===this.state.migrationType&&(0===this.state.email.trim().length&&(e.email={message_text:P("Please enter an email address")}),0===this.state.password.trim().length&&(e.password={message_text:P("Please enter a password")}),this.props.isPagelet||this.state.tosChecked||(e.tos_agree={message_text:P("Please check the box to continue")})),e},_updateErrors:function(){var e,t;return e=this._getErrors(),t=a.omit(this.state.errors,function(t,a){return!(a in e)}),a.isEqual(this.state.errors,t)?void 0:this.setState({errors:t})},_onCTAClick:function(e){var t,s;return e.preventDefault(),this.state.submitting?void 0:(t=this._getErrors(),this.setState({errors:t}),a.isEmpty(t)?(this.setState({submitting:!0,serverErrors:{}}),s=function(e){return function(t,a,o){var s,i;return e.setState({submitting:!1}),"rate-limit"===t.getResponseHeader("x-dropbox-app-error")?void r.error(P("You can’t create more than two teams per user account. Please reach out to support if you’d like to create a new team.")):(o=function(){try{return JSON.parse(o)}catch(e){}}()||{},e._logErrors(o),"email-taken"!==(null!=(s=o.email)?s.message_text:void 0)&&"email-taken"!==(null!=(i=o.email)?i.message_html:void 0)||(o.email.message_text=P("This e-mail is already taken.")),void e.setState({serverErrors:o}))}}(this),this.props.personalUser.email===this.state.email?(t={email:{}},t.email.message_text=P("You’re already signed in!"),void this.setState({submitting:!1,serverErrors:t})):this.props.isPagelet?void("personal"===this.state.migrationType?n.WebRequest({url:"/register_for_team_creation",data:{team_name:"My New Team",email:this.state.email,password:this.state.password,fname:this.props.personalUser.fname,lname:this.props.personalUser.lname,tos_agree:!0},success:function(e){return function(t){return e.props.onSuccess({email:e.state.email,migrationType:e.state.migrationType},e.state.migrationType)}}(this),error:s}):"work"===this.state.migrationType&&this.props.onSuccess(this.state)):"work"===this.state.migrationType?n.WebRequest({url:"/team/create_limited",data:{team_name:this.state.teamName,tos_agree:!0,request_membership_policy:y.AUTO_ACCEPT,show_onboarding_on_team_creation:this.props.showOnboardingOnTeamCreation,_tk:o.get_uri().path},success:function(e){return function(t){var a;return e.props.onSuccess?"function"==typeof(a=e.props).onSuccess?a.onSuccess(JSON.parse(t)):void 0:o.redirect(i({path:"/team",query:{team_created:1}}))}}(this),error:s}):n.WebRequest({url:"/register_for_team_creation",data:{team_name:this.state.teamName,email:this.state.email,password:this.state.password,fname:this.props.personalUser.fname,lname:this.props.personalUser.lname,tos_agree:this.state.tosChecked},success:function(e){return function(){return o.redirect("/verify_email_for_team_creation?email="+encodeURIComponent(e.state.email))}}(this),error:s})):void this._logErrors(t))},_logErrors:function(e){var t;return e=a.mapObject(e,function(e){return e.message_text}),t=a.keys(e).length,t>0&&"work"!==this.state.migrationType&&(e.error_count=t,S.log("create_new_team_dropbox_error",e),"email-taken"===e.email)?S.log("entered_existing_account_info"):void 0},_onKeyPress:function(e){return"Enter"===e.key?this._onCTAClick(e):void 0},_renderError:function(t){var a,o,s,r,i;return a=(null!=(o=this.state.errors[t])?o.message_text:void 0)||(null!=(s=this.state.serverErrors[t])?s.message_text:void 0),a||null==(null!=(r=this.state.serverErrors[t])?r.message_html:void 0)||(a=k.span({dangerouslySetInnerHTML:{__html:e.sanitize(f({msg:null!=(i=this.state.serverErrors[t])?i.message_html:void 0}))}})),w(N,{transitionName:"form-error"},a?k.div({className:"form-error",title:a},a):void 0)},_renderTeamNameForm:function(){return k.div({className:"team-name-form"},k.label({htmlFor:"team_name_input",className:"team-name-form__label"},P("Team Name")),this._renderError("team_name"),w(x,{valueLink:this.linkState("teamName"),className:"team-name-form__input",placeholder:P("Company or organization name"),"disable-errors":!0,autofocus:!0,id:"team_name_input",onKeyPress:this._onKeyPress}))},_renderSignupForm:function(){return k.div({key:"signup-form",className:"signup-form"},k.div({className:"signup-form-input"},this._renderError("email"),w(x,{valueLink:this.linkState("email"),className:"signup-form-input__email",placeholder:P("Enter work email"),"disable-errors":!0,inline:!0,onKeyPress:this._onKeyPress})),k.div({className:"signup-form-input"},this._renderError("password"),w(v,{valueLink:this.linkState("password"),className:"signup-form-input__password",placeholder:P("Password"),"disable-errors":!0,inline:!0,measureStrength:!0,onKeyPress:this._onKeyPress})),this.props.isPagelet?void 0:k.div({className:"signup-form__tos"},this._renderError("tos_agree"),k.input({checkedLink:this.linkState("tosChecked"),className:"signup-form__tos-checkbox",type:"checkbox",id:"signup-form__tos-checkbox"}),k.label({htmlFor:"signup-form__tos-checkbox",className:"signup-form__tos-label"},A(P("I agree to <termsLink>Dropbox Terms</termsLink>"),{termsLink:k.a({href:"/terms",target:"_blank"})}))))},getMigrationTypeValueLink:function(){return{value:this.state.migrationType,requestChange:function(e){return function(t){return t!==e.state.migrationType?(S.log("onboarding_creation_select_migration_option",{migration_type:t}),e.setState({migrationType:t})):void 0}}(this)}},workRadioItem:function(e){var t;return t=this.props.isPagelet?{title:P("Convert my Dropbox into a Work Dropbox"),description:P("Convert your Dropbox “%(user_email)s”, along with all its files into a Team Dropbox").format({user_email:e.email}),title_bubble:P("Converting your current Dropbox (%(user_email)s) to a Team Dropbox allows you to more easily share with teammates and organize company files. You will still have full ownership over your account. As the team creator, only you will have have admin permissions and are the only person who can upgrade the team to Dropbox Business.").format({user_email:e.email}),bubble_direction:"west"}:{title:P("Make my current Dropbox a Team Dropbox"),description:P("All of your files will remain with “%(user_email)s”, and will stay private until you choose to share them. If you use this Dropbox mostly for personal stuff, choose “Create a new Team Dropbox.”").format({user_email:e.email}),title_bubble:P("Converting your current Dropbox (%(user_email)s) to a Team Dropbox allows you to more easily share with teammates and organize company files. You will still have full ownership over your account. As the team creator, only you will have have admin permissions and are the only person who can upgrade the team to Dropbox Business.").format({user_email:e.email}),bubble_direction:"east"},w(E,{value:"work",key:"work-option"},k.div({className:"migration-option"},k.h3({className:"migration-option__title"},t.title),k.div({className:"migration-option__description"},t.description," ",w(d,{text:t.title_bubble,direction:t.bubble_direction},k.span({className:"migration-option__learn-more"},P("Learn more"))))))},personalRadioItem:function(e){var t;return t=this.props.isPagelet?{title:P("Add a new Work Dropbox"),description:P("Keep your work stuff separate by creating a Work Dropbox under a new account. You will have the option of choosing the files you want to transfer to this new Dropbox.").format({user_email:e.email})}:{title:P("Create a new Team Dropbox"),description:P("Keep your work and personal files separate by creating a new Team Dropbox. You can move any files from your current Dropbox [%(user_email)s] after you set up your new Team Dropbox.").format({user_email:e.email})},w(E,{value:"personal",key:"personal-option"},k.div({className:"migration-option"},k.h3({className:"migration-option__title"},t.title),k.div({className:"migration-option__description"},t.description," "),w(N,{transitionName:"signup-form"},"personal"===this.state.migrationType?this._renderSignupForm():void 0)))},renderMaestro:function(e){return e=this.props.personalUser,k.div({className:"new-limited-team-create-form"},k.div({className:"account-migration-form"},w(T,{variant:C.Large,align:"top",legend:P("Account migration options."),valueLink:this.getMigrationTypeValueLink()},this.props.emailIsBusinessDomain?[this.workRadioItem(e),this.personalRadioItem(e)]:[this.personalRadioItem(e),this.workRadioItem(e)])),k.div({className:"cta-form"},w(g,{className:"cta-form__button",onClick:this._onCTAClick,disabled:this.state.submitting},P("Create Team Dropbox"))))},renderOriginal:function(e){return k.div({className:"new-limited-team-create-form"},this._renderTeamNameForm(),k.div({className:"account-migration-form"},w(T,{variant:C.Large,align:"top",legend:P("Account migration options."),valueLink:this.getMigrationTypeValueLink()},"personal"===this.props.defaultMigrationType?[this.personalRadioItem(e),this.workRadioItem(e)]:[this.workRadioItem(e),this.personalRadioItem(e)])),k.hr(),k.div({className:"cta-form"},w(g,{className:"cta-form__button",onClick:this._onCTAClick,disabled:this.state.submitting},P("personal"===this.state.migrationType?"Continue":"Create Team Dropbox"))))},render:function(){var e;return e=this.props.personalUser,this.props.isPagelet?this.renderMaestro(e):this.renderOriginal(e)}})})}.call(this),function(){define("modules/clean/teams/request_membership_policy_select",["external/react","modules/core/i18n","modules/clean/react/select","modules/clean/react/sprite","modules/clean/react/tooltip","modules/clean/teams/constants"],function(e,t,a,o,s,r){var i,n,m,l,c,u,p,d,h,_,g,f,b,v;return g=t._,d=r.REQUEST_MEMBERSHIP_POLICY_VALUES,p=r.REQUEST_MEMBERSHIP_POLICY_LABEL_VARIANTS,f=e.createElement,b=e.DOM,v=e.PropTypes,u=[d.AUTO_ACCEPT,d.REQUIRE_APPROVAL,d.DISABLED],h=d.REQUIRE_APPROVAL,i=d.AUTO_ACCEPT,n=d.DISABLED,l=p.FOR_USER,m=p.FOR_ADMIN,c={},c[l]={},c[l][h]=g("Find and ask to join"),c[l][i]=g("Find and join on their own"),c[l][n]=g("Find and join by invite only"),c[m]={},c[m][h]=g("Find and ask to join"),c[m][i]=g("Find and join on their own"),c[m][n]=g("Find and join by invite only"),_=e.createClass({displayName:"RequestMembershipPolicySelect",propTypes:{defaultValue:v.oneOf(u),labelVariant:v.oneOf([l,m]).isRequired,onChange:v.func,teamDomain:v.string.isRequired,valueLink:v.shape({value:v.oneOf(u).isRequired,requestChange:v.func.isRequired})},getDefaultProps:function(){return{defaultValue:d.AUTO_ACCEPT}},render:function(){var e,t;return t=g("Only coworkers with a verified @%(team_domain)s email address can find or join your team.").format({team_domain:this.props.teamDomain}),b.div({className:"request-membership-approval-select"},b.div({className:"request-membership-approval-select__label-wrapper"},f(s.Tooltip,{position:s.TooltipPosition.RIGHT,tooltip_contents:b.div({className:"request-membership-approval-select__tooltip"},t)},b.label({className:"request-membership-approval-select__label"},g("How should other coworkers join the team?")),f(o,{className:"request-membership-approval-select__tooltip-icon",group:"web",name:"info",alt:g("more information")}))),f(a.input,{className:"request-membership-approval-select__select","disable-errors":!0,defaultValue:this.props.defaultValue,valueLink:this.props.valueLink,onChange:this.props.onChange},function(){var t,o,s;for(s=[],t=0,o=u.length;o>t;t++)e=u[t],s.push(f(a.option,{value:e,key:e},c[this.props.labelVariant][e]));return s}.call(this)))}})})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,a=this.length;a>t;t++)if(t in this&&this[t]===e)return t;return-1};define("modules/clean/teams/team_choose",["external/react","external/underscore","jquery","modules/core/i18n","modules/core/user_i18n","modules/core/uri","modules/clean/analytics","modules/clean/avatar/avatar_with_default","modules/clean/avatar/initials_avatar_with_color","modules/clean/avatar/stacked_avatars","modules/clean/em_string","modules/clean/react/button","modules/clean/components/title_bubble","modules/clean/react/image","modules/clean/static_urls","modules/clean/teams/constants","modules/clean/teams/prop_types"],function(t,a,o,s,r,i,n,m,l,c,u,p,d,h,_,g,f){var b,v,y,T,E,C,N,S,x,P,w,k,R,A;return S=s._,A=s.ungettext,N=n.TeamsWebActionsLogger,R=_.static_url,y=g.TEAM_JOIN_REQUEST_STATE,w=f.joinableTeam,x=t.createElement,P=t.DOM,k=t.PropTypes,v=t.addons.CSSTransitionGroup,T=t.createClass({displayName:"TeamChooseWidget",propTypes:{cancelJoinTeamHandler:k.func.isRequired,joinableTeams:k.arrayOf(w).isRequired,joinTeamHandler:k.func.isRequired,showTeamTypeLabels:k.bool,hideFreeTeamLabel:k.bool,highlightPaidTeamCta:k.bool},render:function(){var e,t,a,o,s,r,i;for(e=this.props.joinableTeams.slice(0),o=[],(null!=(r=this.props.joinableTeams[0])?r.is_invite:void 0)&&(o=this.props.joinableTeams.slice(0,1),e=e.slice(1)),a=t=0,s=e.length;s>t;a=++t)if(i=e[a],i.join_request_state===y.REQUEST_APPROVED){o.push(i),e.splice(a,1);break}return P.div(null,o.length>0?x(E,{cancelJoinTeamHandler:this.props.cancelJoinTeamHandler,joinableTeams:o,joinTeamHandler:this.props.joinTeamHandler,showTeamTypeLabels:this.props.showTeamTypeLabels,title:A("Team invitation","Team invitations",o.length),className:"invited-section",hideFreeTeamLabel:this.props.hideFreeTeamLabel,highlightPaidTeamCta:this.props.highlightPaidTeamCta}):void 0,e.length>0?x(E,{cancelJoinTeamHandler:this.props.cancelJoinTeamHandler,joinableTeams:e,joinTeamHandler:this.props.joinTeamHandler,showTeamTypeLabels:this.props.showTeamTypeLabels,title:A("Team you can join","Teams you can join",e.length),hideFreeTeamLabel:this.props.hideFreeTeamLabel,highlightPaidTeamCta:this.props.highlightPaidTeamCta}):void 0)}}),E=t.createClass({displayName:"TeamJoinList",propTypes:{buttonImportance:k.string,ctaNewTeamImportance:k.string,cancelJoinTeamHandler:k.func.isRequired,className:k.string,joinableTeams:k.arrayOf(w).isRequired,joinTeamHandler:k.func.isRequired,title:k.string.isRequired,maxNamesToShow:k.number,staticRows:k.arrayOf(k.shape({icon:k.element,title:k.string,subtitle:k.string,actionText:k.string,actionHandler:k.func})),showTeamTypeLabels:k.bool,disableButtons:k.bool,hideFreeTeamLabel:k.bool,highlightPaidTeamCta:k.bool},getInitialState:function(){var t,a,o,s,r,i,n,m;for(m=[],a=[y.WAITING_FOR_APPROVAL,y.REQUEST_APPROVED,y.REQUEST_REJECTED_OPEN],r=this.props.joinableTeams,o=t=0,s=r.length;s>t;o=++t)n=r[o],i=n.join_request_state,e.call(a,i)>=0?m.unshift(n.team_id):m.push(n.team_id);return{teamSortOrder:m,expanded:!1}},getDefaultProps:function(){return{maxNamesToShow:3,staticRows:[],disableButtons:!1}},componentWillReceiveProps:function(e){var t,o;return e.joinableTeams?(t=a.indexBy(e.joinableTeams,"team_id"),o=a.filter(this.state.teamSortOrder,function(e){return t[e]}),o=a.uniq(o.concat(a.map(t,function(e){return e.team_id}))),this.setState({teamSortOrder:o})):void 0},getSortedJoinableTeams:function(){var e;return e=a.indexBy(this.props.joinableTeams,"team_id"),a.map(this.state.teamSortOrder,function(t){return e[t]})},renderShowMore:function(e){return P.li({className:"team-list-show-more"},P.span({className:"team-list-show-more-button",onClick:function(e){return function(){return e.setState({expanded:!0}),N.log("click_expand")}}(this)},A("View %(num_teams)d more","View %(num_teams)d more",e).format({num_teams:e})))},render:function(){var e,t,a,o,s,r,i,n,m,l,c;for(e=Math.max(0,3-this.props.staticRows.length),r=this.getSortedJoinableTeams().map(function(e){return function(t){var a;return a=e.props.buttonImportance,e.props.highlightPaidTeamCta&&!t.is_limited&&(a="primary"),x(C,{team:t,cancelJoinTeamHandler:e.props.cancelJoinTeamHandler,joinTeamHandler:e.props.joinTeamHandler,key:t.team_id,buttonImportance:a,maxNamesToShow:e.props.maxNamesToShow,showTeamTypeLabels:e.props.showTeamTypeLabels,disableButton:e.props.disableButtons,hideFreeTeamLabel:e.props.hideFreeTeamLabel})}}(this)),t=r,l=null,i=null,r.length>e&&(t=r.slice(0,e),this.state.expanded?i=r.slice(e):l=this.renderShowMore(r.length-e)),m=this.props.staticRows,a=0,s=m.length;s>a;a++)c=m[a],o=c.icon||x(h,{src:R("/static/images/teams/add_cir-vfl6sl23s.png"),srcHiRes:R("/static/images/teams/add_cir@2x-vflGMnZ12.png")}),n=x(b,{icon:o,title:c.title||S("Create a new Team Dropbox"),subtitle:c.subtitle,actionText:c.actionText||S("Create"),actionHandler:c.actionHandler,disableButton:this.props.disableButtons,importance:this.props.ctaNewTeamImportance}),this.state.expanded?i.push(n):t.push(n);return P.div({className:this.props.className},P.div({className:"team-list-title"},this.props.title),P.ol({className:"team-list-view"},t,l,r.length>e?x(v,{transitionName:"team-list-show-more-section"},i?P.div({className:"team-list-show-more-section"},i):void 0):void 0))}}),b=t.createClass({displayName:"BasicListItem",propTypes:{icon:k.element,title:k.string,subtitle:k.string,actionText:k.string,actionHandler:k.func,disableButton:k.bool,importance:k.string},render:function(){return P.li({className:"team-list-item",key:this.props.title+this.props.subtitle},P.div({className:"team-list-item-contents"},P.div({className:"team-list-item__custom-img u-mar-right-s"},this.props.icon),P.div({className:"team-list-item-body"},P.div({className:"team-list-item-text team-list-item-title"},this.props.title),this.props.subtitle&&this.props.subtitle.length>0?P.span({className:"team-list-item-text team-list-item-subtitle"},this.props.subtitle):void 0),P.div({className:"team-list-item-actions"},x(p.button,{importance:this.props.importance||"primary",disabled:this.props.disableButton,onClick:this.props.actionHandler},this.props.actionText))),P.div({className:"clear"}))}}),C=t.createClass({displayName:"TeamJoinListItem",propTypes:{team:w.isRequired,cancelJoinTeamHandler:k.func.isRequired,joinTeamHandler:k.func.isRequired,buttonImportance:k.string,maxNamesToShow:k.number,showTeamTypeLabels:k.bool,disableButton:k.bool,hideFreeTeamLabel:k.bool},getInitialState:function(){return{submit:!1}},componentWillReceiveProps:function(e){return this.setState({submit:!1})},_is_pending_state:function(t){var a;return a=[y.WAITING_FOR_APPROVAL,y.REQUEST_REJECTED_OPEN],e.call(a,t)>=0},getCtaButtonProps:function(){var e;return e=this.props.team,e.is_invite||e.join_request_state===y.REQUEST_APPROVED?{children:S("Accept Invitation"),disabled:this.state.submit||this.props.disableButton}:this._is_pending_state(e.join_request_state)?{children:S("Asked to join"),disabled:!0,importance:"tertiary"}:e.join_request_state===y.APPROVAL_REQUIRED?{children:S("Ask to join"),disabled:this.state.submit||this.props.disableButton}:e.join_request_state===y.CAN_AUTO_JOIN?{children:S("Join"),disabled:this.state.submit||this.props.disableButton}:void 0},renderActionItem:function(){var e;return e=this.props.team,this._is_pending_state(e.join_request_state)?P.div({className:"cancel-request"},S("Request Sent"),P.span({className:"u-pad-xs"},S("·")),P.a({onClick:function(t){return function(){return t.props.cancelJoinTeamHandler(e)}}(this)},S("Cancel"))):x(p.button,o.extend({importance:this.props.buttonImportance||"tertiary",onClick:function(t){return function(){return t.props.joinTeamHandler(e),t.setState({submit:!0})}}(this)},this.getCtaButtonProps()))},_generateMemberCountSpan:function(e){return P.span({className:"team-list-item-text team-list-item-subtitle"},A("%(num_members)d member","%(num_members)d members",e).format({num_members:e}))},renderMembersSection:function(e){var t,a,o,s,r,i,n,m,l,c,p;if(e.is_private)return[P.span({className:"team-list-item-text team-list-item-invitee-name"},u.em_snippet(S("Private"),30)),P.span({className:"u-pad-xxs",key:"middle-dot"},S("·")),this._generateMemberCountSpan(e.num_members)];if(e.inviting_user_name){for(p="",l=e.members_to_display,a=0,r=l.length;r>a;a++)n=l[a],p+=n.email+"\n";return e.members_to_display.length<e.num_members&&(t=e.num_members-e.members_to_display.length,p+=S("and %(extra)s more").format({extra:t})),[x(d,{text:e.inviting_user_email||e.inviting_user_name,key:"invitee-name",direction:"south"},P.span({className:"team-list-item-text team-list-item-invitee-name"},u.em_snippet(S("Invited by %(admin_name)s").format({admin_name:e.inviting_user_name}),30))),P.span({className:"u-pad-xxs",key:"middle-dot"},S("·")),x(d,{text:p,direction:"south",respectLineBreaks:!0,key:"title-bubble"},this._generateMemberCountSpan(e.num_members))]}for(m="",p="",c=e.members_to_display,o=s=0,i=c.length;i>s;o=++s)n=c[o],o>this.props.maxNamesToShow-1?p+=n.email+"\n":m+=o===e.members_to_display.length-1?0!==o&&o!==this.props.maxNamesToShow-1?S("and %(display_name)s").format({display_name:n.display_name}):""+n.display_name:n.display_name+", ";return e.members_to_display.length<e.num_members&&(t=e.num_members-e.members_to_display.length,p+=S("and %(extra)s more").format({extra:t})),p?[P.span({className:"team-member-names",key:"team-member-names"},m),x(d,{text:p,direction:"south",respectLineBreaks:!0,key:"title-bubble"},P.span({},A("and %(num_members)s more","and %(num_members)s more",e.num_members-this.props.maxNamesToShow).format({num_members:e.num_members-this.props.maxNamesToShow})))]:P.span({className:"team-member-names"},m)},renderAvatars:function(e){var t;return e.is_private?P.div({className:"team-list-item__custom-img u-mar-right-s"},x(h,{src:R("/static/images/teams/private_cir-vfl4ZCA6w.png"),srcHiRes:R("/static/images/teams/private_cir@2x-vflv746EN.png")})):e.members_to_display.length>=2?x(c,{user_front:e.members_to_display[0],user_back:e.members_to_display[1],dimension:24,shape:"CIRCLE"}):1===e.members_to_display.length?(t=e.members_to_display[0],P.div({className:"single-avatar-section u-l-ib u-mar-right-s"},x(m,{dimension:32,photoUrl:t.avatar_url,defaultAvatar:x(l,{dimension:32,name:t.display_name,initials:r.getInitials(t.display_name||t.email),shape:"CIRCLE"})}))):void 0},renderTeamLabel:function(e){if(this.props.showTeamTypeLabels&&null!=e.is_limited){if(e.is_limited){if(this.props.hideFreeTeamLabel)return;return P.span({}," - ",S("Free team"))}return P.span({}," - ",P.a({href:"/business?_tk=biz-cta&_camp=highlight-teams"},S("Business team")))}},render:function(){var e;return e=this.props.team,P.li({className:"team-list-item"},P.div({className:"team-list-item-contents"},this.renderAvatars(e),P.div({className:"team-list-item-body"},P.div({className:"team-list-item-text team-list-item-title"},e.team_name,this.renderTeamLabel(e)),this.renderMembersSection(e)),P.div({className:"team-list-item-actions"},this.renderActionItem())),P.div({className:"clear"}))}}),{TeamChooseWidget:T,TeamJoinList:E}})}.call(this),function(){define("modules/clean/teams/team_promo_page",["external/classnames","external/react","modules/clean/account/email","modules/clean/account/email_verify_reasons","modules/clean/ajax","modules/clean/analytics","modules/clean/contacts/data","modules/clean/contacts/types","modules/clean/notserver","modules/clean/react/button","modules/clean/react/dbox_app_promo","modules/clean/react/image","modules/clean/react/modal","modules/clean/static_urls","modules/clean/teams/constants","modules/clean/teams/limited_team_invite_and_settings_modal","modules/clean/teams/dbox_app_team_promo_grid","modules/clean/teams/limited_team_create_modal","modules/clean/teams/limited_team_invite_modal","modules/clean/teams/prop_types","modules/clean/teams/team_choose","modules/clean/teams/team_suggested_member_preview","modules/clean/viewer","modules/constants/python","modules/constants/teams","modules/core/browser","modules/core/i18n","modules/core/notify","modules/core/uri"],function(e,t,a,o,s,r,i,n,m,l,c,u,p,d,h,_,g,f,b,v,y,T,E,C,N,S,x,P,w){
var k,R,A,I,M,O,D,L,q,B,j,U,F,H,V,W,J,G,Q,Y,z,K,X;return I=a.EmailVerification,W=s.WebRequest,V=r.TeamsWebActionsLogger,k=i.Contact,D=m.NotClients,R=c.DboxAppPromo,A=c.DboxAppPromoHeader,O=p.Modal,K=d.static_url,B=h.TEAM_JOIN_REQUEST_STATE,q=h.REQUEST_MEMBERSHIP_POLICY_VALUES,M=f.LimitedTeamCreateModal,Y=v.joinableTeam,F=y.TeamChooseWidget,U=C.TRADEMARK_BUSINESS,j=N.TEAM_PROMO_PAGE_IMAGE_PATHS,J=x._,X=x.ungettext,G=t.createElement,Q=t.DOM,z=t.PropTypes,L={},L[B.WAITING_FOR_APPROVAL]=!0,L[B.REQUEST_REJECTED_OPEN]=!0,H=t.createClass({displayName:"TeamPromoPage",propTypes:{canCreateTeam:z.bool,isEmailVerified:z.bool,canSetTeamRequestMembershipPolicyOnCreate:z.bool,autoShowCreate:z.bool,autoShowEmailVerify:z.bool,initialJoinableTeams:z.arrayOf(Y),suggestedMembers:z.arrayOf(z.shape({name:z.string,email:z.string})),email:z.string,emailIsBusinessDomain:z.bool,creatorCont:z.string,showOnboardingOnTeamCreation:z.bool,teamMembersLimit:z.number,joinerCont:z.string,hasPendingTeam:z.bool,selectedOptionInTeamCreateForm:z.oneOf(["personal","work"]),dbimgCache:z.object,immediatelySendVerificationEmail:z.bool,showTeamTypeLabels:z.bool,hideFreeTeamLabel:z.bool,highlightPaidTeamCta:z.bool},onInviteModalDismissed:function(){return W({url:"/team/get_team_folder_pathname",type:"GET",success:function(e){var t;return t=JSON.parse(e),S.redirect("/home"+t)},error:function(){return S.redirect("/")}})},onTeamCreate:function(){return this.props.showOnboardingOnTeamCreation?E.get_viewer().reload(function(e){return function(){return O.showInstance(G(_,{onInvited:e.onInviteModalDismissed,onDismissCompleted:e.onInviteModalDismissed,maxTeamSize:e.props.teamMembersLimit,initialTeamRequestMembershipPolicy:q.AUTO_ACCEPT,canSetTeamRequestMembershipPolicy:e.props.canSetTeamRequestMembershipPolicyOnCreate,viewer:E.get_viewer(),suggested_contacts:e.props.suggestedMembers.map(function(e){return new k({dbx_account_id:e.avatar_url&&e.id,type:n.EMAIL,name:e.display_name,email:e.email,photo_url:e.avatar_url})})}))}}(this)):S.redirect(this.props.creatorCont)},getDefaultProps:function(){return{immediatelySendVerificationEmail:!1,viewer:E.get_viewer()}},getInitialState:function(){return{joinableTeams:this.props.initialJoinableTeams}},_getSvgImage:function(t,a,o){return Q.div({className:e({"promo-header-image":!0,clickable:null!=a}),onClick:a},Q.img({src:K(t),alt:null!=o?o:""}))},componentDidMount:function(){return this.props.autoShowEmailVerify?this.triggerVerifyEmail():void 0},onCreateTeamClicked:function(){return this.props.hasPendingTeam?(this.setState({confirmingPendingTeamCreation:!0}),D[this.props.viewer.personal_user.id].pause(),S.redirect(w({path:"/team",query:{create_pending_team:1}}))):this._showCreateTeamModal()},_showCreateTeamModal:function(){return M.show({canSetTeamRequestMembershipPolicy:this.props.canSetTeamRequestMembershipPolicyOnCreate,onSuccess:this.onTeamCreate,selectedOptionInTeamCreateForm:this.props.selectedOptionInTeamCreateForm,showOnboardingOnTeamCreation:this.props.showOnboardingOnTeamCreation})},onTeamJoinClicked:function(e){var t;return t=function(e){return e.is_invite?"pending_invite":e.join_request_state===B.REQUEST_APPROVED?"join_approved":e.join_request_state===B.CAN_AUTO_JOIN?"auto_join":e.join_request_state===B.APPROVAL_REQUIRED?"ask_to_join":""},V.log("select_team",{team_id:e.team_id,team_size:e.num_members,type:t(e)}),this.gotoJoinTeamPage(e)},gotoJoinTeamPage:function(e){var t;return e.is_invite?(t={signup_key:e.signup_key,cont:this.props.joinerCont},S.redirect(w({path:"/team/join",query:t}).toString())):W({url:"/team/discover/join_ajax",data:{team_id:e.team_id,cont:this.props.joinerCont},success:function(e){return function(t){switch(t=JSON.parse(t),null!=t?t.result:void 0){case"request_sent":if(P.success(J("Request to join sent.")),t.joinableTeams)return e.setState({joinableTeams:t.joinableTeams});break;case"can_join":return S.redirect(t.url);case"max_team_size_achieved":return P.error(J("This team has reached the maximum size. Please ask the admins of this team to upgrade to %(trademark_business)s, which allows teams to add as many members as possible.").format({trademark_business:U}));default:return P.error(J("Invalid request"))}}}(this)})},onCancelRequestToJoinClicked:function(e){return W({url:"/team/join_request/cancel",data:{team_id:e.team_id},success:function(e){return function(t){return t=JSON.parse(t),(null!=t?t.joinableTeams:void 0)&&e.setState({joinableTeams:t.joinableTeams}),P.success(J("Request to join canceled"))}}(this)})},triggerVerifyEmail:function(){var e;return e=I.getForRole("personal"),this.props.immediatelySendVerificationEmail?e.send_email_and_show_resend_modal(o.CREATE_TEAM,function(){}):e.show(null,o.CREATE_TEAM)},logPromoSeen:function(){var e,t,a,o,s,r,i,n,m,l;if(a={},this.state.joinableTeams){for(l=[],r=[],i=[],n=[],m=[],o=this.state.joinableTeams,e=0,t=o.length;t>e;e++)s=o[e],s.is_invite?m.push(s):s.join_request_state===B.REQUEST_APPROVED?r.push(s):s.join_request_state===B.WAITING_FOR_APPROVAL?l.push(s):s.join_request_state===B.CAN_AUTO_JOIN?n.push(s):s.join_request_state===B.APPROVAL_REQUIRED&&i.push(s);a={has_pending_invite:m.length>0,has_outstanding_request:l.length>0,has_approved_request:r.length>0,num_auto_join:n.length,num_ask_to_join:i.length}}return a.verified=this.props.isEmailVerified,a._tk=window.location.pathname,V.log("saw_team_promo_page",a,null,null,!1,V.LOG_CATEGORY.PROMO_TEAMS)},renderPromoHeader:function(){var t,a;return this.logPromoSeen(),this.props.isEmailVerified?0===this.state.joinableTeams.length?(a=J("Using Dropbox at work?"),G(A,{className:e(this.props.className,a.length>75?"small-title":void 0,"no-team"),title:a,text:J("Set up a free team, and get new features that help your company work better together."),primaryButtonText:J("Create free team"),primaryButtonHandler:this.onCreateTeamClicked,primaryButtonDisabled:!1,rightComponent:this._getSvgImage("/static/images/teams/fastrak_promo-vflv_eQ8Z.svg")})):(t="primary",this.props.highlightPaidTeamCta&&(t="tertiary"),G(A,{className:e(this.props.className,"multiple-team"),text:X("Create or join a team to collaborate more easily with your coworkers. With teams you get access to a shared team folder, a separate work Dropbox, groups, and other tools and features.","Join one of these teams or create a new one to get new work features and easy access to the team’s files. You can always leave to join another team at any time!",this.state.joinableTeams.length),rightComponent:G(l.button,{className:"create-team-button",importance:t,onClick:this.onCreateTeamClicked,disabled:this.state.confirmingPendingTeamCreation},J("Create free team"))},G(F,{joinableTeams:this.state.joinableTeams,joinTeamHandler:this.onTeamJoinClicked,cancelJoinTeamHandler:this.onCancelRequestToJoinClicked,showTeamTypeLabels:this.props.showTeamTypeLabels,hideFreeTeamLabel:this.props.hideFreeTeamLabel,highlightPaidTeamCta:this.props.highlightPaidTeamCta}))):(a=J("Using Dropbox at work?"),G(A,{className:e(this.props.className,a.length>75?"small-title":void 0,"no-team"),title:a,text:J("Set up a free team, and get new features that help your company work better together."),primaryButtonText:J("Get started"),primaryButtonHandler:this.triggerVerifyEmail,primaryButtonDisabled:!1,rightComponent:this._getSvgImage("/static/images/teams/fastrak_promo-vflv_eQ8Z.svg")}))},render:function(){return G(R,{title:J("Team"),className:"team-promo-page"},this.renderPromoHeader(),G(g,{columns:[{title:J("Organize company files"),imageSource:j.FILES,text:J("Get a dedicated work Dropbox and team folder—a central place for the files everyone needs."),altText:J("A picture of the new dedicated work dropbox icon.")},{title:J("Protect sensitive data"),imageSource:j.SETTINGS,text:J("Limit access to important files and folders, so company information stays in the right hands."),altText:J("A picture of privacy settings for folders.")},{title:J("Finish projects faster"),imageSource:j.MEMBERS,text:J("Collaborate with coworkers and clients, get feedback, and share your work quickly."),altText:J("A picture of the team members list.")}],dbimgCache:this.props.dbimgCache}))}})})}.call(this),function(){define("modules/clean/teams/team_suggested_member_preview",["external/react","modules/clean/avatar/avatar_with_default","modules/clean/avatar/initials_avatar_with_color","modules/core/i18n","modules/core/user_i18n"],function(e,t,a,o,s){var r,i,n,m,l;return i=o._,n=e.createElement,m=e.DOM,l=e.PropTypes,r=e.createClass({displayName:"TeamSuggestedMemberPreview",propTypes:{label:l.string,contacts:l.arrayOf(l.shape({display_name:l.string.isRequired,avatar_url:l.string}))},getDefaultProps:function(){return{contacts:[]}},_getNamesAsString:function(){var e,t;return e=this.props.contacts.map(function(e){return e.display_name}),t=1===e.length?e[0]:e.slice(0,-1).join(i(", ",{comment:'This comma is the separator for an enumeration of names. The sentence where it will be used looks like this: "Invite all your coworkers, including: Amanda Jones, Sara Simmons, James Kirkwood, and Tim Lon".'}))+i(" and ",{comment:'This is part of an enumeration of names. The sentence where it will be included looks like this: "Invite all your coworkers, including: Amanda Jones, Sara Simmons, James Kirkwood, and Tim Lon".'})+e[e.length-1]},render:function(){var e;return m.div({className:"team-suggested-member-preview"},m.div({className:"team-suggested-member-preview__avatars"},function(){var o,r,i;for(r=this.props.contacts,i=[],o=r.length-1;o>=0;o+=-1)e=r[o],i.push(m.div({className:"team-suggested-member-preview__contact-avatar"},n(t,{dimension:48,photoUrl:e.avatar_url,defaultAvatar:n(a,{dimension:48,name:e.display_name,initials:s.getInitials(e.display_name),shape:"CIRCLE"})})));return i}.call(this)),m.div({className:"team-suggested-member-preview__text"},this.props.label),m.div({className:"team-suggested-member-preview__names"},this._getNamesAsString()))}})})}.call(this),function(){define("modules/constants/teams",[],function(){return window.TeamsConstants})}.call(this);
//# sourceMappingURL=pkg-al.min.js-vflV5eLXS.map